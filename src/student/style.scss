@import "tailwindcss";

@plugin "daisyui" {
    themes: light --default, dark;
}

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Outfit:wght@700;800;900&display=swap');

// SMC Brand Palette (Legacy for reference, but we use DaisyUI vars now)
$font-heading: 'Outfit', 'Inter', sans-serif;
$font-body: 'Inter', sans-serif;

.smc-student-app {
    min-height: 100vh;
    font-family: $font-body;
    position: relative;
    overflow-x: hidden;
    @apply bg-base-100 text-base-content;
}

// Student Header (Sticky & Glassy)
.smc-student-header {
    @apply bg-base-100/70 backdrop-blur-xl border-b border-base-content/5 sticky top-0 z-[100] h-20 flex items-center;

    .smc-header-container {
        @apply max-w-7xl w-full mx-auto px-8 flex justify-between items-center;
    }

    .smc-badge-mini {
        @apply text-[10px] font-black uppercase tracking-[0.2em] text-teal-500 opacity-60;
    }
}

.smc-student-content {
    @apply max-w-7xl mx-auto py-12 px-8 relative z-[1] flex-grow;
}

// Course Player Layout
.smc-course-player {
    @apply fixed inset-0 z-[2000] bg-base-100 flex overflow-hidden;
    height: 100dvh;
    --smc-player-top-offset: 0px;
}

/* Prevent WP admin bar from obscuring the fixed course player for logged-in users. */
body.admin-bar .smc-course-player {
    --smc-admin-bar-offset: var(--wp-admin--admin-bar--height, 32px);
    --smc-player-top-offset: var(--smc-admin-bar-offset);
    top: var(--smc-admin-bar-offset);
}

@media (max-width: 782px) {
    body.admin-bar .smc-course-player {
        --smc-admin-bar-offset: var(--wp-admin--admin-bar--height, 46px);
    }
}

.smc-player-sidebar {
    @apply w-80 bg-base-200 border-r border-base-content/5 flex flex-col h-full;
    z-index: 25;

    .smc-sidebar-header {
        @apply p-6 border-b border-base-content/5 bg-base-100;

        .smc-back-btn {
            @apply flex items-center gap-2 mb-4 text-xs font-bold text-base-content/50 hover:text-base-content transition-colors uppercase tracking-widest;
            background: none;
            border: none;
            cursor: pointer;
        }

        .smc-course-title {
            @apply text-lg font-black leading-tight text-base-content tracking-tight;
            font-family: 'Outfit', sans-serif;
        }
    }

    .smc-course-curriculum {
        @apply flex-1 overflow-y-auto p-4;

        .smc-section {
            @apply mb-6;

            .smc-section-title {
                @apply text-[10px] font-black uppercase text-base-content/30 px-3 mb-2 tracking-[0.2em];
            }
        }

        .smc-lesson-list {
            @apply space-y-1;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .smc-lesson-item {
            @apply p-4 rounded-xl cursor-pointer flex items-center gap-4 transition-all duration-200 hover:bg-base-content/5;

            &.active {
                @apply bg-teal-500/10 text-teal-500 font-bold;
            }

            .smc-lesson-title {
                @apply text-sm leading-snug;
            }

            .smc-lesson-meta {
                @apply text-[10px] uppercase font-black tracking-widest text-base-content/30 mt-1 flex items-center gap-2;
            }
        }
    }
}

.smc-player-content {
    @apply flex-1 flex flex-col bg-base-100 min-w-0;

    .smc-player-header {
        @apply h-[72px] border-b border-base-content/5 flex items-center px-10 bg-base-100/50 backdrop-blur-md sticky top-0 z-10;

        .smc-mobile-tools {
            @apply hidden;
        }

        .smc-player-title-wrap {
            @apply w-full flex items-center justify-between gap-4;
        }

        h1 {
            @apply text-xl font-black text-base-content tracking-tight;
            font-family: 'Outfit', sans-serif;
        }

        .smc-instructor-link-btn {
            @apply inline-flex items-center gap-1.5 px-3 py-2 rounded-lg text-xs font-bold uppercase tracking-wide border border-base-content/15 text-base-content/70 hover:text-base-content hover:bg-base-content/5 transition-colors;
            background: none;
        }
    }

    .smc-lesson-viewer {
        @apply flex-1 p-10 overflow-y-auto max-w-4xl mx-auto w-full;
        @extend .scrollbar-hidden;

        .smc-video-container {
            @apply aspect-video w-full bg-black rounded-2xl overflow-hidden shadow-2xl shadow-black/20;
        }

        .smc-text-lesson {
            @apply bg-base-200/50 p-10 rounded-2xl text-base-content/80 text-lg leading-relaxed;

            h2,
            h3 {
                @apply font-black text-base-content mt-10 mb-4 tracking-tight;
                font-family: 'Outfit', sans-serif;
            }

            p {
                @apply mb-6;
            }

            ul,
            ol {
                @apply mb-6 ml-6 space-y-2;
            }
        }
    }
}

.smc-player-footer {
    @apply p-6 px-10 border-t border-base-content/5 bg-base-100/50 backdrop-blur-md flex justify-end items-center;

    .smc-btn-complete {
        @apply bg-teal-500 text-white font-bold py-3 px-8 rounded-xl hover:bg-teal-600 transition-all shadow-lg shadow-teal-500/20 active:scale-95 disabled:opacity-50 disabled:pointer-events-none uppercase tracking-widest text-xs;
    }
}

.smc-notes-sidebar {
    @apply w-80 bg-base-200/50 border-l border-base-content/5 flex flex-col h-full backdrop-blur-md;
    z-index: 25;

    h3 {
        @apply p-6 pb-2 text-xs font-black uppercase text-base-content/40 tracking-widest;
    }

    textarea {
        @apply flex-grow bg-transparent p-6 text-base-content/70 text-sm leading-relaxed resize-none focus:outline-none;
        font-family: inherit;
    }

    .smc-notes-status {
        @apply p-4 px-6 text-[10px] font-bold text-base-content/30 border-t border-base-content/5 bg-base-content/5;
    }
}

.smc-mobile-overlay {
    @apply hidden;
}

.smc-instructor-fab {
    position: fixed;
    right: 1.25rem;
    bottom: 1.25rem;
    z-index: 35;
    width: 56px;
    height: 56px;
    border-radius: 999px;
    border: 2px solid color-mix(in srgb, var(--fallback-b1, #ffffff) 80%, transparent);
    box-shadow: 0 14px 34px rgba(0, 0, 0, 0.24);
    overflow: hidden;
    background: color-mix(in srgb, var(--fallback-b1, #ffffff) 90%, var(--fallback-b2, #f3f4f6) 10%);
    color: var(--fallback-bc, #111827);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;

    img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
}

.smc-instructor-modal-overlay {
    @apply fixed inset-0 bg-black/55 backdrop-blur-sm z-40 flex items-center justify-center p-4;
}

.smc-instructor-modal {
    width: min(680px, 100%);
    max-height: calc(100dvh - 2rem);
    overflow-y: auto;
    border-radius: 1rem;
    border: 1px solid color-mix(in srgb, var(--fallback-bc, #111827) 15%, transparent);
    background: color-mix(in srgb, var(--fallback-b1, #ffffff) 96%, var(--fallback-b2, #f3f4f6) 4%);
    box-shadow: 0 30px 90px rgba(0, 0, 0, 0.32);
    padding: 1.25rem;
    position: relative;

    section {
        margin-top: 1rem;
    }

    h2 {
        @apply text-2xl font-black tracking-tight;
        font-family: $font-heading;
    }

    h3 {
        @apply text-sm font-black uppercase tracking-widest text-base-content/50 mb-2;
    }

    p {
        @apply text-sm leading-relaxed text-base-content/80 whitespace-pre-line;
    }
}

.smc-instructor-modal-close {
    @apply absolute top-3 right-3 w-8 h-8 rounded-full border border-base-content/15 text-base-content/60 hover:text-base-content hover:bg-base-content/5 flex items-center justify-center;
    background: none;
}

.smc-instructor-modal-head {
    @apply flex items-center gap-4 pr-10;
}

.smc-instructor-avatar {
    width: 64px;
    height: 64px;
    border-radius: 999px;
    object-fit: cover;
    border: 1px solid color-mix(in srgb, var(--fallback-bc, #111827) 12%, transparent);
}

.smc-instructor-avatar-fallback {
    @apply flex items-center justify-center bg-base-content/5 text-base-content/60;
}

.smc-instructor-skills {
    @apply flex flex-wrap gap-2;

    span {
        @apply px-2.5 py-1 rounded-full text-xs font-bold bg-teal-500/10 text-teal-600 border border-teal-500/20;
    }
}

.smc-instructor-links {
    @apply flex flex-wrap gap-2;

    a {
        @apply inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wide border border-base-content/15 text-base-content/75 hover:text-base-content hover:bg-base-content/5;
        text-decoration: none;
    }
}

.smc-course-grid {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12;
}

.smc-course-card {
    @apply bg-base-200 border border-base-content/5 rounded-2xl overflow-hidden transition-all duration-300 hover:-translate-y-1 hover:border-teal-500/30 hover:shadow-2xl hover:shadow-teal-900/10;

    .smc-course-thumb {
        @apply h-48 bg-base-300 relative overflow-hidden;

        img {
            @apply w-full h-full object-cover transition-transform duration-700;
        }
    }

    .smc-course-info {
        @apply p-8 flex flex-col flex-grow;

        h3 {
            @apply mb-4 text-xl font-bold text-base-content;
        }
    }
}

.smc-progress-bar {
    @apply h-1.5 bg-base-content/10 rounded-full overflow-hidden mb-2;

    .smc-progress-fill {
        @apply h-full transition-all duration-1000;
    }
}

.smc-premium-heading {
    @apply font-black tracking-tight text-base-content;
    font-family: $font-heading;
}

.smc-premium-badge {
    @apply text-[10px] font-black uppercase tracking-[0.2em] text-teal-500 bg-teal-500/10 px-3 py-1.5 rounded-full inline-block;
}

.smc-glass-card {
    @apply bg-base-200/50 backdrop-blur-md border border-base-content/10;
}

.smc-btn-logout {
    @apply flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold text-base-content/60 hover:text-base-content hover:bg-base-content/10 transition-all;
}

.smc-btn-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    border: 0;
    border-radius: 14px;
    padding: 0.78rem 1.2rem;
    font-size: 0.86rem;
    font-weight: 800;
    letter-spacing: 0.03em;
    color: #f8fbfb;
    background: linear-gradient(135deg, #12a69d 0%, #0d7d78 100%);
    box-shadow: 0 12px 30px rgba(14, 118, 115, 0.24);
    transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;

    &:hover {
        transform: translateY(-1px);
        filter: brightness(1.05);
        box-shadow: 0 16px 36px rgba(14, 118, 115, 0.3);
    }

    &:active {
        transform: translateY(0);
    }

    &:disabled {
        opacity: 0.55;
        cursor: not-allowed;
        transform: none;
        filter: none;
        box-shadow: none;
    }
}

// Animations from Shared Styles if needed (Radial Backgrounds)
.smc-radial-bg {
    @apply absolute inset-0 pointer-events-none overflow-hidden -z-10;

    .bg-gradient-teal {
        @apply absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-teal-500/20 blur-[120px] rounded-full;
    }

    .bg-gradient-red {
        @apply absolute -bottom-[20%] -right-[10%] w-[50%] h-[50%] bg-red-500/10 blur-[120px] rounded-full;
    }
}

// Hide scrollbar for clean look
.scrollbar-hidden::-webkit-scrollbar {
    display: none;
}

.scrollbar-hidden {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

@media (max-width: 1024px) {
    .smc-course-player {
        @apply relative;
    }

    .smc-mobile-overlay {
        @apply block fixed inset-0 bg-black/35 z-20 border-0 m-0 p-0 cursor-pointer;
    }

    .smc-player-sidebar,
    .smc-notes-sidebar {
        @apply fixed bottom-0 w-[min(86vw,360px)] bg-base-100;
        top: var(--smc-player-top-offset);
        height: calc(100dvh - var(--smc-player-top-offset));
        transition: transform 0.28s ease;
    }

    .smc-player-sidebar {
        left: 0;
        transform: translateX(-100%);
        box-shadow: 0 20px 48px rgba(0, 0, 0, 0.2);

        &.is-mobile-open {
            transform: translateX(0);
        }
    }

    .smc-notes-sidebar {
        right: 0;
        transform: translateX(100%);
        box-shadow: 0 20px 48px rgba(0, 0, 0, 0.2);

        &.is-mobile-open {
            transform: translateX(0);
        }
    }

    .smc-player-content {
        width: 100%;

        .smc-player-header {
            @apply h-auto min-h-[72px] flex-col items-start gap-3 px-4 py-3;

            .smc-mobile-tools {
                @apply flex items-center gap-2;
            }

            .smc-mobile-tool-btn {
                @apply inline-flex items-center gap-1.5 px-3 py-2 rounded-lg text-xs font-bold uppercase tracking-wide bg-base-200 text-base-content/85 border border-base-content/10;
                background: none;
            }

            h1 {
                @apply text-base leading-tight;
            }

            .smc-player-title-wrap {
                @apply items-start flex-col gap-2;
            }
        }

        .smc-lesson-viewer {
            @apply p-4;
        }

        .smc-text-lesson {
            @apply p-5 text-base;
        }
    }

    .smc-player-footer {
        @apply px-4 py-3 justify-stretch;
        padding-bottom: calc(0.75rem + env(safe-area-inset-bottom));

        .smc-btn-complete {
            @apply w-full py-3 text-[11px];
        }
    }

    .smc-instructor-fab {
        display: none;
    }
}
